<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Credit Consumption Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      display: flex;
      gap: 20px;
    }
    .calculator {
      width: 60%;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 8px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: bold;
    }
    select, input {
      width: 100%;
      padding: 8px;
      margin-bottom: 16px;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    button {
      width: 100%;
      padding: 10px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
    }
    button:hover {
      background-color: #0056b3;
    }
    .result {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
    }
    .info-popup {
      width: 35%;
      padding: 20px;
      border-radius: 8px;
      background-color: #f9f9f9;
      display: block;
    }
    .info-popup p {
      margin: 8px 0;
      color: #555;
      line-height: 1.6;
    }
    .usage-entry {
      margin-bottom: 16px;
    }
  </style>
</head>
<body>
  <div class="calculator">
    <h2>Credit Consumption Calculator</h2>

    <label for="area">Select Category:</label>
    <select id="area" onchange="updateTasks()">
      <option value="" disabled selected>Select a category</option>
      <option value="connect">Connect, Harmonize, and Unify</option>
      <option value="analyze">Analyze and Predict</option>
      <option value="act">Act</option>
      <option value="realtime">E2E Real-Time Processing</option>
      <option value="segment">Segment and Activation</option>
    </select>

    <div id="usageEntries"></div>

    <button onclick="addUsageEntry()">Add Another Usage Entry</button>
    <button onclick="calculateTotalCredits()">Calculate Total Credits</button>

    <div class="result" id="result"></div>
  </div>

  <div class="info-popup" id="infoPopup">
    <p id="infoDescription">Select a category and usage type to see detailed information.</p>
  </div>

  <script>
    const areaDescriptions = {
      connect: "This category focuses on connecting and integrating data across systems, ensuring a unified flow of information. It includes tasks like data pipelines, federation, profile unification, and private connect, enabling efficient collaboration and decision-making.",
      analyze: "Analytical tools to transform raw data into actionable insights, data calculations and predictions.",
      act: "Creating insights, building AI functionality, querying for reports and dashboards, integrating data with apps, and creating automations.",
      realtime: "E2E Real-Time Processing ensures high-speed data handling, enabling businesses to react instantly to events. It supports real-time decision-making and facilitates the handling of critical event-driven workflows.",
      segment: "Segment and Activation focuses on tailoring and delivering personalized marketing strategies. By enabling segmentation and activation of specific customer data, it supports targeted campaigns that enhance user engagement and drive conversion."
    };

    const multipliers = {
      connect: {
        "Data Pipeline (Batch)": { multiplier: 2000, description: "Processes data in structured batches for harmonization and unification across systems.", unit: "Rows" },
        "Data Pipeline (Streaming)": { multiplier: 5000, description: "Manages continuous data streams in real-time scenarios.", unit: "Rows" },
        "Data Transforms": { multiplier: 400, description: "Converts raw data into formats optimized for analytics.", unit: "Rows" }
      },
      analyze: {
        "Calculated Insights (Batch)": { multiplier: 15, description: "Generates detailed reports and insights from batch-processed data.", unit: "Rows" },
        "Calculated Insights (Streaming)": { multiplier: 800, description: "Produces real-time insights by analyzing streaming data.", unit: "Rows" }
      }
    };

    function updateTasks() {
      const area = document.getElementById("area").value;
      document.getElementById("infoDescription").textContent = areaDescriptions[area] || "";
    }

    function addUsageEntry() {
      const area = document.getElementById("area").value;
      if (!area) {
        alert("Please select a category before adding usage entries.");
        return;
      }

      const entryDiv = document.createElement("div");
      entryDiv.className = "usage-entry";

      const taskSelect = document.createElement("select");
      taskSelect.innerHTML = '<option value="" disabled selected>Select a usage type</option>';
      for (const task in multipliers[area]) {
        const option = document.createElement("option");
        option.value = task;
        option.textContent = task;
        taskSelect.appendChild(option);
      }

      const dataInput = document.createElement("input");
      dataInput.type = "number";
      dataInput.placeholder = "Enter volume of data";

      entryDiv.appendChild(taskSelect);
      entryDiv.appendChild(dataInput);
      document.getElementById("usageEntries").appendChild(entryDiv);
    }

    function calculateTotalCredits() {
      const entries = document.querySelectorAll(".usage-entry");
      let totalCredits = 0;

      entries.forEach(entry => {
        const task = entry.querySelector("select").value;
        const volume = parseFloat(entry.querySelector("input").value);
        const area = document.getElementById("area").value;

        if (task && !isNaN(volume) && volume > 0) {
          const multiplier = multipliers[area][task].multiplier;
          totalCredits += (volume / 1_000_000) * multiplier;
        }
      });

      document.getElementById("result").textContent = `Total Credits Consumed: ${totalCredits.toFixed(2)}`;
    }
  </script>
</body>
</html>
